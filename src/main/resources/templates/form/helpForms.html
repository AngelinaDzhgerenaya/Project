<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Заявки нуждающихся</title>
    <link rel="stylesheet" href="/css/form.css">
</head>

<body>

<!-- ===== ШАПКА ===== -->
<header>
    <a href="/" class="logo">Рука помощи</a>

    <nav>
        <a href="/not-secured/help">Нуждающиеся</a>
        <a href="/not-secured/volunteer">Волонтёры</a>
        <a href="/not-secured/benefit">Льготы</a>
    </nav>

    <a href="/api/v1/user/account" class="account-btn">Аккаунт</a>
</header>


<div class="forms-content">

    <h1 style="margin-left: 25px;">Все запросы помощи</h1>

    <div class="layout">


        <!-- ===== ФИЛЬТРЫ ===== -->
        <aside class="filters">

            <h2>Фильтры</h2>

            <form method="get" action="/not-secured/help">

                <label>Город</label>
                <input type="text" name="city" th:value="${city}">

                <label>Доступное время</label>
                <input type="text" name="availability" th:value="${availability}">

                <label>Кому нужна помощь</label>
                <input type="text" name="helpGroup" th:value="${helpGroup}">

                <label>Состояние</label>
                <input type="text" name="personCondition" th:value="${personCondition}">

                <label>Какая помощь требуется</label>
                <input type="text" name="helpNeeded" th:value="${helpNeeded}">


                <!-- ===== СОРТИРОВКА ===== -->
                <div class="f-field">
                    <label>Сортировка</label>

                    <select name="sort">

                        <option value="">Без сортировки</option>

                        <option value="created"
                                th:selected="${sort == 'created'}">
                            Сначала новые
                        </option>

                        <option value="updated"
                                th:selected="${sort == 'updated'}">
                            Сначала недавно обновленные
                        </option>

                    </select>
                </div>

                <button type="submit">Применить</button>

            </form>

        </aside>



        <!-- ===== СПИСОК ===== -->
        <main class="content">

            <!-- ===== ПОИСК ===== -->
            <div class="search-panel" style="margin-bottom: 20px;">

                <form method="get" action="/not-secured/help" class="search-bar">

                    <input type="text"
                           name="query"
                           placeholder="Поиск по ключевым словам..."
                           th:value="${query}">

                    <!-- передаём сортировку -->
                    <input type="hidden" name="sort" th:value="${sort}">

                    <button type="submit">Найти</button>

                </form>

            </div>



            <!-- если пусто -->
            <div th:if="${helps.size() == 0}">
                <p>Заявки не найдены.</p>
            </div>



            <!-- карточки -->
            <div th:each="h : ${helps}" class="card">

                <h3 th:text="${h.fullName}"></h3>

                <p><b>Имя:</b> <span th:text="${h.fullName}"></span></p>
                <p><b>Город:</b> <span th:text="${h.city}"></span></p>
                <p><b>Возраст:</b> <span th:text="${h.age}"></span></p>
                <p><b>Доступность:</b> <span th:text="${h.availability}"></span></p>
                <p><b>Кому нужна помощь:</b> <span th:text="${h.helpGroup}"></span></p>
                <p><b>Требуемая помощь:</b> <span th:text="${h.helpNeeded}"></span></p>

                <a th:href="@{/not-secured/help/{id}(id=${h.id})}">
                    Открыть анкету →
                </a>

            </div>

        </main>

    </div>

</div>



<!-- ===== ФУТЕР ===== -->
<footer>
    <div class="footer-content">

        <div class="footer-links">
            <a href="/api/v1/user/account">Аккаунт</a>
            <a href="/not-secured/login">Войти</a>
            <a href="/not-secured/registration">Зарегистрироваться</a>
        </div>

        <div class="footer-links">
            <a href="/api/v1/volunteer/form">Предложить помощь</a>
            <a href="/api/v1/help/form">Запросить помощь</a>
        </div>

        <div class="footer-links">
            <a href="/contacts">Контакты</a>
        </div>

    </div>
</footer>

</body>
</html>
